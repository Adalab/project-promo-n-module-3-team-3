"use strict";const contentCollapsable=document.querySelectorAll(".js_content"),headerCollapsables=document.querySelectorAll(".js_headerCollapsable");for(const e of headerCollapsables)e.addEventListener("click",handlerCollapsable);function handlerCollapsable(e){const t=e.currentTarget,r=t.nextElementSibling,a=t.querySelector(".js_arrow");for(const e of contentCollapsable)r===e?(e.classList.toggle("hidden"),e.classList.toggle("div_content"),a.classList.toggle("fa-chevron-down"),a.classList.toggle("fa-chevron-up")):(e.classList.add("hidden"),e.classList.remove("div_content"))}const inputColorPalettes=document.querySelectorAll(".input_palette"),previewSection=document.querySelector(".js-preview");for(const e of inputColorPalettes)e.addEventListener("click",handleDesignCard);function handleDesignCard(e){const t=e.currentTarget.value;previewSection.classList.remove("palette1"),previewSection.classList.remove("palette2"),previewSection.classList.remove("palette3"),previewSection.classList.remove("palette4"),previewSection.classList.remove("palette5"),previewSection.classList.add("palette"+t)}const resetFormButton=document.querySelector(".js_resetbutton");function handleResetLocalStorage(){localStorage.removeItem("dataUser"),location.reload()}resetFormButton.addEventListener("click",handleResetLocalStorage);const buttonShare=document.querySelector(".js_button_share"),parrafoShare=document.querySelector(".js_parrafo_share"),sectionShare=document.querySelector(".js_share_twitter"),shareTitle=document.querySelector(".js_sharetitle"),linkTwitter=document.querySelector(".js_linktwitter"),linkFacebook=document.querySelector(".js_linkFacebook"),linkLinkedin=document.querySelector(".js_linkLinkedin");let dataUser={palette:"",name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""};const form=document.querySelector(".js_form");function handlerFormData(e){const t=e.target.id,r=e.target.value;dataUser[t]=r}function handleCreateBtn(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(dataUser),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{sectionShare.classList.remove("hidden"),!0===e.success?(shareTitle.innerHTML="La tarjeta ha sido creada",parrafoShare.innerHTML=e.cardURL,parrafoShare.setAttribute("href",e.cardURL),linkTwitter.href="https://twitter.com/intent/tweet?url="+e.cardURL,linkFacebook.href="https://www.facebook.com/sharer/sharer.php?u="+e.cardURL,linkLinkedin.href="https://www.linkedin.com/shareArticle?url="+e.cardURL):(shareTitle.innerHTML="Error al crear tarjeta:",parrafoShare.innerHTML="Por favor, revise los datos introducidos",parrafoShare.removeAttribute("href"))})}form.addEventListener("change",handlerFormData),buttonShare.addEventListener("click",handleCreateBtn);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");let photo="";function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage);return fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,fileField.setAttribute("value",fr.result),dataUser.photo=fr.result}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage);const inputTextElements=document.querySelectorAll(".js_inputtext"),textPreviewElements=document.querySelectorAll(".js_previewtext");function handlePreviewText(){textPreviewElements[0].innerHTML=inputTextElements[0].value,textPreviewElements[1].innerHTML=inputTextElements[1].value,setObjectInLocalStorage()}for(const e of inputTextElements)e.addEventListener("change",handlePreviewText);const inputCardsLinks=document.querySelectorAll(".js_input_link"),cardPreviewIcons=document.querySelectorAll(".js-icon-circle");function handleClickCardLinks(e){let t=e.currentTarget;"http://localhost:3000/cards.html"===t.href&&(t=e.preventDefault())}for(const e of cardPreviewIcons)e.addEventListener("click",handleClickCardLinks);function handleCardLinks(){cardPreviewIcons[1].setAttribute("href","mailto:"+inputCardsLinks[0].value),cardPreviewIcons[0].setAttribute("href","tel:+34"+inputCardsLinks[1].value),cardPreviewIcons[2].setAttribute("href","https://www.linkedin.com/in/"+inputCardsLinks[2].value),cardPreviewIcons[3].setAttribute("href","https://github.com/"+inputCardsLinks[3].value),setObjectInLocalStorage()}for(const e of inputCardsLinks)e.addEventListener("change",handleCardLinks);function paintCard(){document.querySelector("#name").value=dataUser.name;document.querySelector("#job").value=dataUser.job;document.querySelector("#email").value=dataUser.email;document.querySelector("#phone").value=dataUser.phone;document.querySelector("#linkedin").value=dataUser.linkedin;document.querySelector("#github").value=dataUser.github,profileImage.style.backgroundImage=`url(${dataUser.photo})`,profilePreview.style.backgroundImage=`url(${dataUser.photo})`,fileField.setAttribute("value",dataUser.photo),previewSection.classList.remove("palette1"),previewSection.classList.remove("palette2"),previewSection.classList.remove("palette3"),previewSection.classList.remove("palette4"),previewSection.classList.remove("palette5"),previewSection.classList.add("palette"+dataUser.palette),handleCardLinks(),handlePreviewText()}function setObjectInLocalStorage(){const e=JSON.stringify(dataUser);localStorage.setItem("dataUser",e)}function getObjectFromLocalStorage(){const e=localStorage.getItem("dataUser");if(null!==e){const t=JSON.parse(e);dataUser=t,paintCard()}}getObjectFromLocalStorage();